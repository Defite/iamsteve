{layout='layouts/_layout-blog'}

{!--
	Redirect
	============
	This is a blog single entry page, it'll never need a fourth segment, so we use the following code to make sure the page redirects if someone types in an incorrect URL in the browser address bar, by adding new segments. i.e. http://example.com/blog/entry/title/nothing
--}
{if segment_4}
	{redirect='{segment_1}/{segment_2}/{segment_3}'}
{/if}

<div class="page-content">
  {exp:channel:entries require_entry="yes" show_future_entries="yes" track_views="one" channel="blog" status="latest|open|draft" global:param_disable_default global:param_cache_param}
  
    {if no_results}{redirect="404"}{/if}
    <span style="display:none">Viewed: {view_count_one}</span>
		
    <article role="article" class="entry-content">
      {if image}
    	  {image}<img src="{url:large}" srcset="{url:xlarge} 2x">{/image}
      {if:elseif category == 7}
    	  <img src="{site_url}assets/images/design-default-{exp:iamsteve:number from='1' to='4'}.svg">
    	{if:else}
    	  <img src="{site_url}assets/images/code-default-{exp:iamsteve:number from='1' to='4'}.svg">
    	{/if}
      {exp:markdown}{article}{/exp:markdown}
    </article>
    {blog_nav}
  
  {/exp:channel:entries}
</div>

{next_article}