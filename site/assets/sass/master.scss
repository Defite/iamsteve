@import "import/framework", "import/normalize";

@-webkit-viewport {
	width: device-width; }
@-moz-viewport {
	width: device-width; }
@-ms-viewport {
	width: device-width; }
@-o-viewport {
	width: device-width; }
@viewport {
	width: device-width; }
	
/* 
	!Base stucture
---------------------------------------------------------------------- */
html,
body:after {
	font-family: "a"; }
	
body {
	font-size: 100%;
 	line-height: normal;
	color: $primary;
	background: #f6f7ee; }
	
$bg-path: "triangles.png";
.container {
	@include pie-clearfix;
  margin-bottom: 1.5rem;
	padding: em($line, $base-font-size) 0 0;
	position: relative;
	overflow: hidden;
	background: $primary;
	//background-size: ceil(image-width($bg-path)/2) ceil(image-height($bg-path)/2);
	
	@include respond-min($c) { margin-bottom: 3rem; } }

img {
	vertical-align: bottom; }
// potential to break, old imgs without a figure in blog posts
article img {
	@extend %imgs;
	display: block; }
		
// header
// ---------------------------
[role="banner"] {
	@extend %crm;
	@extend %transition;
	@include border-radius(4px 4px 0 0);
	position: relative; }
	
	.logo {
		@extend %left;
		@include wh(106px, 49px);
		@include hide-text;
		transition: none;
		display: block;
		padding: 0;
		position: relative;
		background: url(../images/logo.png) center center no-repeat;
		
		&:hover, &:focus {
			background: url(../images/logo_hover.png) center center no-repeat; }
			
		@include respond-to(retina) {
			@include wh(107px, 48px);
			background: url(../images/logo_2x.png);
			background-size: 107px 48px;
			
			&:hover, &:focus {
				background: url(../images/logo_hover_2x.png) center center no-repeat;
				background-size: 48px; } } }

	.title {
		@include rem(padding, $line 0 $line*2);
		position: relative;
		width: 88%;
		margin: auto;
		text-align: center;

		.error & {
			text-transform: capitalize; } }

	
// navigation
// ---------------------------
@import "styles/navigation";
		
// section
// ---------------------------
[role="region"] {
	@include pie-clearfix;
	width: $whole;
	margin: 0 0 em($line, $base-font-size);
	&:last-child {
		margin: 0;
		padding: 0;
		border: none; } }
[role="main"], [role="contentinfo"], .related {
	@extend %crm;
	clear: both; }
	
.me {
	img {
		@extend %rounded;
		@extend %shadow;
		margin: 0 cp(24px, 480px) 2.5% 0;
		vertical-align: bottom;
		display: inline-block;
		border: 6px solid $white;
		max-width: 33.333333%;
		float: left; } }

.columns {
	@include column-count(2); }

@import "styles/dribbble";

// article
// ---------------------------
[role="article"] {
	@include pie-clearfix;
	margin: auto auto em($line, $base-font-size);
	position: relative;
	
	figure {
		@include pie-clearfix;
		margin-bottom: em($line, $base-font-size);
		position: relative;
		img {
			display: block;
			margin: auto auto .75rem; } }
			
	figcaption {
		text-align: center; }
		
	@include respond-min($c) {
		padding-right: 7.5%;
		padding-left: 7.5%;
		margin-bottom: em($line*2, $base-font-size); }
		
	@include respond-min($d) {
		padding-right: 15.5%;
		padding-left: 15.5%; } }

/* !aside ---------------------- */
@import "styles/meta";

/* 
	!Typography & links
---------------------------------------------------------------------- */
@import "styles/typography";

// pagination
// ---------------------------
@import "styles/pagination";

/* 
	Lists
---------------------------------------------------------------------- */
article {
	ul, ol {
		list-style: inside square;
		margin: 0 0 $line;
		@include respond-min($c) {
			list-style-position: outside; } } }
		
[role="contentinfo"] {
	text-align: center;
	@include respond-min($c) {
		text-align: left; }
	ul {
		@extend %subtle-box;
		@include pie-clearfix;
		@include border-radius($radius);
		padding: 0 em($base-px/2, 12px);
		margin: 0; }
	li {
		display: inline-block;
		@include respond-min(35em) {
			float: right; }
		&:first-child {
			display: block;
			@include respond-min(35em) {
				display: inline-block;
				float: left; } }
	small {
		text-align: center;
		@include rem(padding, $base-px 0 0 $base-px/2); }
	.url, .author {
		display: inline-block;
		padding: 0; }
	a {
		@include rem(padding, $base-px $base-px/2);
		@extend %transition;
		&:hover, &:focus {
			color: $primary; } }
	small, a {
		font-size: .875rem;
		margin: 0;
		display: block;
		color: $primary;
		color: fade-out($primary, 0.5);
		line-height: 1; 
		@include respond-min(35em) {
			@include rem(height, $footer-height);
			@include rem(line-height, $footer-height);
			@include rem(padding, 0 $base-px/2); } } } }

dl {
	line-height: 1.5; }
dt {
	@include rem(margin, $line 0 $base-px);
	&:first-of-type {
		margin-top: 0; } }
dd {
	margin: 0;
	padding: 0; }
		
/*
	!Buttons and notices
-----------------------------------------------------------------------*/
.button, .button-small {
	@include element($alt, $size: 5, $hover: true);
	@extend %letter-spacing;
	white-space: nowrap;
	font-size: .875rem;
	line-height: 1.5; }

.button-small {
	@include rem(padding, 6px 9px);
	font-size: 70%;
	line-height: 1; }


// notices
// ---------------------------
.notice {
	a { 
		color: $white; } }
.notice-default {
	@include element; }
.notice-warning {
	@include element($warning, $size: 5);
	width: 100%;
	text-align: center;
	a { 
		color: #fff;
		text-decoration: underline; } }
.notice-success {
	@include element($success, $size: 6, $hover: true);
	float: right;
	em { 
		@extend %mr6; } }


/*
	!Forms
-----------------------------------------------------------------------*/
@import "import/forms", "styles/forms";

/*
	!Page specifics
-----------------------------------------------------------------------*/
@import "styles/portfolio", "styles/about";

// , "styles/blog"


.related-entries, .previous-entries {
	@include pie-clearfix;
	@extend %margin-bottom;
	
	@include respond-min($c) {
		@include rem(margin, 0 0 $line*2); }
	
	@include respond-min($d) {
		h1 {
			padding-left: 15.5%; } } }

.previous-entries-container,
.related-entries-container {
  @include pie-clearfix;
  margin-bottom: -$line;
  
  @include respond-min($d) {
    padding: 0 15.5%; } }

.related-entry, 
.previous-entry {
	width: 50%;
	display: inline-block;
	vertical-align: top;
	padding-bottom: $line;
	
	&:nth-of-type(odd) {
  	padding-right: $base-px; }
	
	&:nth-of-type(even) {
  	padding-left: $base-px; }
	
	p {
  	margin: 0;
		font-size: 14px;
		
		@include respond-min($c) {
  		font-size: 16px; } } }


/* 
	Misc.
---------------------------------------------------------------------- */
.hiddenFields {
	display: none; }
iframe {
	width: 100%; }
hr {
	@extend %crm;
	box-shadow: 0 1px rgba($white, .8);
	padding: 0;
	border: none;
	border-top: 1px solid rgba($primary, .1);
	background: rgba($white, .8);
	display: block;

	[role="main"] & {
		max-width: 100%;
		width: 100%; } }

// figure
// ---------------------------
figure {
	@include pie-clearfix; }
figcaption {}

// hide extras from services
// ---------------------------
.js [id="wufoo-q7x3k1"] p {
	display: none; }
	
// screenreaders
// ---------------------------
[for="keywords"], .screenreader { 
	@extend %screenreaders; }
	
// code
// ---------------------------
@import "styles/code";
	
// extends
// ---------------------------
@import "styles/extends";

// lettering
// ---------------------------
.space {
	@include rem(width, $line); }

.push-bottom {
  margin-bottom: $line; }

// Post layout
// ---------------------------
.p-flex { 
  display: -webkit-flex;
  display: flex;
  
  @media (max-width: 599px) { 
    -webkit-flex-flow: column wrap;
    flex-flow: column wrap; } }

.p-flex-gutter {
  -webkit-justify-content: space-between;
  justify-content: space-between; }

.p-one-half {
  -webkit-flex-basis: 50%;
  flex-basis: 50%;
  
  .p-flex-gutter & {
    -webkit-flex-basis: 48.75%;
    flex-basis: 48.75%; } }

.p-one-third {
  -webkit-flex-basis: 33.333333%;
  flex-basis: 33.333333%;
  
  .p-flex-gutter & {
    -webkit-flex-basis: 31.666666667%;
    flex-basis: 31.666666667%; } }

// New stuff
// ---------------------------
.wide-image.wide-image.wide-image {
  border: none;
  box-shadow: none;
  border-radius: 0;
  box-shadow: 0 0 0 1px scale-lightness(#f6f7ee, -20%);
  
  @include respond-min($d) {
    max-width: none;
    width: 150%;
    margin-left: -25%;
    margin-right: -25%; } }

/*
	Media queries
-----------------------------------------------------------------------*/
@import "screens/a", "screens/b", "screens/c", "screens/d", "screens/e", "screens/f", "screens/2x";
