/*!
 * ExpressionEngine - by EllisLab
 *
 * @package		ExpressionEngine
 * @author		EllisLab Dev Team
<<<<<<< HEAD
 * @copyright	Copyright (c) 2003 - 2014, EllisLab, Inc.
=======
 * @copyright	Copyright (c) 2003 - 2013, EllisLab, Inc.
>>>>>>> 0fa8825dc34df02ef80cbe3b3e72c69db1cc2cc1
 * @license		http://ellislab.com/expressionengine/user-guide/license.html
 * @link		http://ellislab.com
 * @since		Version 2.0
 * @filesource
 */
<<<<<<< HEAD
"use strict";function refresh_prefs_ajax(e){$.ajax({type:"GET",url:EE.template_prefs_url,data:"is_ajax=TRUE&group_id="+e,dataType:"json",success:function(e){EE.pref_json=e}})}function access_edit_ajax(e){var t,a,n,i=[];e.each(function(e,r){var r=$(r);"no_auth_bounce"===r.attr("name").substr(0,14)?(t=r.attr("name").substr(15)?r.attr("name").substr(15):$("input:hidden[name=template_id]").val(),i.push({template_id:t,no_auth_bounce:r.val()})):"enable_http_auth"===r.attr("name").substr(0,16)?(t=r.attr("name").substr(17)?r.attr("name").substr(17):$("input:hidden[name=template_id]").val(),i.push({template_id:t,enable_http_auth:r.val()})):"template_route"===r.attr("name").substr(0,14)?(t=r.attr("name").substr(15)?r.attr("name").substr(15):$("input:hidden[name=template_id]").val(),i.push({template_id:t,template_route:r.val()})):"route_required"===r.attr("name").substr(0,14)?(t=r.attr("name").substr(15)?r.attr("name").substr(15):$("input:hidden[name=template_id]").val(),i.push({template_id:t,route_required:r.val()})):(a=r.attr("name").replace("access_","").split("_"),t=a.length<2?$("input:hidden[name=template_id]").val():a[1],n=$(r).closest(".accessTable").length?$(r).closest(".accessTable").find(".no_auth_bounce").val():$(".no_auth_bounce").val(),r.attr("checked","checked"),i.push({template_id:t,member_group_id:a[0],new_status:r.val(),no_auth_bounce:n}))}),$.ajax({type:"POST",url:EE.access_edit_url,data:{is_ajax:"TRUE",XID:EE.XID,payload:i},success:function(e){""!==e&&$.ee_notice(e,{duration:3e3,type:"success"})},error:function(e){""!==e.responseText&&$.ee_notice(e.responseText,{duration:3e3,type:"error"})}})}function template_edit_ajax(){var e,t,a,n,i,r,s,d,c,l,_,o,p,u=$(this).closest(".accessRowHeader");return u.length<1&&(u=$(this).closest(".templateEditorTable")),(e=u.data("ajax_ids"))?(t=e.id,a=e.group_id,n=u.find(".template_name").val(),i=u.find("select[name^=template_type]").val(),r=u.find("select[name^=cache]").val(),s=u.find(".refresh").val(),d=u.find("select[name^=allow_php]").val(),c=u.find("select[name^=php_parse_location]").val(),l=u.find(".hits").val(),_=u.find(".template_size").val(),o=u.find("select[name^=protect_javascript]").val(),p=jQuery.param({template_id:t,group_id:a,template_name:n,template_type:i,cache:r,refresh:s,hits:l,allow_php:d,php_parse_location:c,template_size:_,protect_javascript:o}),void $.ajax({type:"POST",url:EE.template_edit_url,data:"is_ajax=TRUE&XID="+EE.XID+"&"+p,success:function(e){var a,i=$("#templateId_"+t);i.text(n),i.closest(".templateName").length?(a=i.closest(".templateName").next().find("a"),a.length&&(a=a.get(0),a.href=a.href.replace(/\/[^\/]*$/,"/"+n))):$("#templateViewLink a.submit").length&&(a=$("#templateViewLink a.submit"),a.length&&(a=a.get(0),a.href=a.href.replace(/\/[^\/]*$/,"/"+n))),$("#template_data").attr("rows",_),$("#hitsId_"+t).text(l),""!==e&&$.ee_notice(e,{duration:3e3,type:"success"})},error:function(e){""!==e.responseText&&$.ee_notice(e.responseText,{duration:3e3,type:"error"})}})):$(this).hasClass("ignore_radio")?!1:access_edit_ajax($(this))}function hideSubRows(e,t){return t?void($(e).data(t)&&$(e).data(t).hide()):(hideSubRows(e,"prefsRow"),void hideSubRows(e,"accessRow"))}function hideRow(e,t){if(e.hasClass("highlightRow")&&e.removeClass("highlightRow"),e.data(t)){var a=e.data(t).is(":visible");return hideSubRows(e),a||(e.addClass("highlightRow"),e.data(t).show()),!0}return hideSubRows(e),!1}function set_radio_buttons(e,t){e.find("input:radio").each(function(){var e,a,n;e=$(this).attr("id").split("_"),a=e.slice(0,-1).join("_"),n=e.slice(-1)[0],$(this).attr({id:a+"_"+t+"_"+n,name:a+"_"+t})})}function bind_prefs_events(){$(".templateTable .accessTable").find("input:text").unbind("blur.manager_updated").bind("blur.manager_updated",template_edit_ajax),$(".templateTable .accessTable").find("input:radio").unbind("click.manager_updated").bind("click.manager_updated",template_edit_ajax),$(".templateTable .accessTable").find("select").unbind("change.manager_updated").bind("change.manager_updated",template_edit_ajax)}!function(e){var t,a;e(document).ready(function(){function n(t,a){var n="input:radio[id$=_";a&&(n="input:radio[id$=_"+a+"_"),t.find(".ignore_radio").click(function(){return("y"===this.value||"n"===this.value)&&access_edit_ajax(t.find(n+this.value+"]").filter(":not(.ignore_radio)")),e(this).attr("checked",!1),!1})}function i(t,i,r){var s=e('<tr class="accessRowHeader"><td colspan="6">'+a+"</td></tr>");s.find(".no_auth_bounce").val(r.no_auth_bounce),s.find(".no_auth_bounce").attr({id:"no_auth_bounce_"+t,name:"no_auth_bounce_"+t}),s.find(".enable_http_auth").val(r.enable_http_auth),s.find(".enable_http_auth").attr({id:"enable_http_auth_"+t,name:"enable_http_auth_"+t}),s.find(".template_route").val(r.template_route),s.find(".template_route").attr({id:"template_route_"+t,name:"template_route_"+t}),s.find(".route_required").val(r.route_required),s.find(".route_required").attr({id:"route_required_"+t,name:"route_required_"+t}),set_radio_buttons(s,t),e.each(r.access,function(e,a){var n=s.find("#access_"+e+"_"+t+"_y"),i=s.find("#access_"+e+"_"+t+"_n");a.access===!0?(n.attr("checked","checked"),i.attr("checked",!1)):(i.attr("checked","checked"),n.attr("checked",!1))}),n(s,t),e(i).addClass("highlightRow"),e(i).after(s),s.find(".accessTable").tablesorter({widgets:["zebra"]}),i.data("accessRow",s)}function r(a,n){var i=e('<tr class="accessRowHeader"><td colspan="6">'+t+"</td></tr>");i.find("select").each(function(){var t=e(this);switch(this.name){case"template_type":t.val(n.type);break;case"cache":t.val(n.cache);break;case"allow_php":t.val(n.allow_php);break;case"php_parse_location":t.val(n.php_parsing);break;case"protect_javascript":t.val(n.protect_javascript)}t.attr("name",this.name+"_"+n.id)}),i.find(".template_name").val(n.name),"index"===n.name&&i.find(".template_name").attr({readonly:"readonly"}),i.find(".refresh").val(n.refresh),i.find(".hits").val(n.hits),i.data("ajax_ids",{id:n.id,group_id:n.group_id}),a.data("prefsRow",i),e(a).addClass("highlightRow"),e(a).after(i)}var s,d,c;return t=e("#prefRowTemplate").html(),a=e("#accessRowTemplate").html(),EE.manager={refreshPrefs:function(e){refresh_prefs_ajax(e)},showPrefsRow:function(t,a){var n=e(a).parent().parent();return hideRow(n,"prefsRow")||(r(n,t),bind_prefs_events()),!1},showAccessRow:function(t,a,n){var r=e(n).parent().parent();return hideRow(r,"accessRow")||(i(t,r,a),bind_prefs_events(),r.trigger("applyWidgets")),!1}},t&&a?void e("#prefRowTemplate, #accessRowTemplate").remove():(s=e("#templateAccess, #templatePreferences"),d=e("input:hidden[name=template_id]").val(),c=e("input:hidden[name=group_id]").val(),e("#templatePreferences").data("ajax_ids",{id:d,group_id:c}),n(e("#templateAccess")),s.find("input:text").unbind("blur.manager_updated").bind("blur.manager_updated",template_edit_ajax),s.find("input:radio").unbind("click.manager_updated").bind("click.manager_updated",template_edit_ajax),void s.find("select").unbind("change.manager_updated").bind("change.manager_updated",template_edit_ajax))}),e(".last_edit").css("opacity",0).show(),e("#template_details").hover(function(){e(".last_edit").animate({opacity:1},50)},function(){e(".last_edit").animate({opacity:0},50)}),e("#template_keywords_reset").click(function(){e("#template_keywords").val(""),e(".search form").submit()})}(jQuery);
=======

function _access_edit_ajax(a,b,g,c){var i="";switch(c){case "no_auth_bounce":i=jQuery.param({template_id:b,no_auth_bounce:a.val()});break;case "enable_http_auth":i=jQuery.param({template_id:b,enable_http_auth:a.val()});break;case "access":c=!$(a).closest(".accessTable").length?$(".no_auth_bounce").val():$(a).closest(".accessTable").find(".no_auth_bounce").val(),i=jQuery.param({template_id:b,member_group_id:g,new_status:a.val(),no_auth_bounce:c})}$.ajax({type:"POST",url:EE.access_edit_url,data:"is_ajax=TRUE&XID="+
EE.XID+"&"+i,success:function(a){""!==a&&$.ee_notice(a,{duration:3E3,type:"success"})},error:function(a){""!==a.responseText&&$.ee_notice(a.responseText,{duration:3E3,type:"error"})}})}function refresh_prefs_ajax(a){$.ajax({type:"GET",url:EE.template_prefs_url,data:"is_ajax=TRUE&group_id="+a,dataType:"json",success:function(a){EE.pref_json=a}})}
function access_edit_ajax(a){var b,g;"no_auth_bounce"===a.attr("name").substr(0,14)?(g=a.attr("name").substr(15)?a.attr("name").substr(15):$("input:hidden[name=template_id]").val(),_access_edit_ajax(a,g,"","no_auth_bounce")):"enable_http_auth"===a.attr("name").substr(0,16)?(g=a.attr("name").substr(17)?a.attr("name").substr(17):$("input:hidden[name=template_id]").val(),_access_edit_ajax(a,g,"","enable_http_auth")):(b=a.attr("name").replace("access_","").split("_"),g=2>b.length?$("input:hidden[name=template_id]").val():
b[1],_access_edit_ajax(a,g,b[0],"access"))}
function template_edit_ajax(){var a=$(this).closest(".accessRowHeader"),b,g,c,i,l,d,j,k,f,m;1>a.length&&(a=$(this).closest(".templateEditorTable"));b=a.data("ajax_ids");if(!b)return $(this).hasClass("ignore_radio")?!1:access_edit_ajax($(this));g=b.id;b=b.group_id;c=a.find(".template_name").val();i=a.find("select[name^=template_type]").val();l=a.find("select[name^=cache]").val();d=a.find(".refresh").val();j=a.find("select[name^=allow_php]").val();k=a.find("select[name^=php_parse_location]").val();f=
a.find(".hits").val();m=a.find(".template_size").val();a=jQuery.param({template_id:g,group_id:b,template_name:c,template_type:i,cache:l,refresh:d,hits:f,allow_php:j,php_parse_location:k,template_size:m});$.ajax({type:"POST",url:EE.template_edit_url,data:"is_ajax=TRUE&XID="+EE.XID+"&"+a,success:function(a){var e=$("#templateId_"+g);e.text(c);if(e.closest(".templateName").length){if(e=e.closest(".templateName").next().find("a"),e.length)e=e.get(0),e.href=e.href.replace(/\/[^\/]*$/,"/"+c)}else if($("#templateViewLink a.submit").length&&
(e=$("#templateViewLink a.submit"),e.length))e=e.get(0),e.href=e.href.replace(/\/[^\/]*$/,"/"+c);$("#template_data").attr("rows",m);$("#hitsId_"+g).text(f);""!==a&&$.ee_notice(a,{duration:3E3,type:"success"})},error:function(a){""!==a.responseText&&$.ee_notice(a.responseText,{duration:3E3,type:"error"})}})}function hideSubRows(a,b){b?$(a).data(b)&&$(a).data(b).hide():(hideSubRows(a,"prefsRow"),hideSubRows(a,"accessRow"))}
function hideRow(a,b){a.hasClass("highlightRow")&&a.removeClass("highlightRow");if(a.data(b)){var g=a.data(b).is(":visible");hideSubRows(a);g||(a.addClass("highlightRow"),a.data(b).show());return!0}hideSubRows(a);return!1}function set_radio_buttons(a,b){a.find("input:radio").each(function(){var a,c;a=$(this).attr("id").split("_");c=a.slice(0,-1).join("_");a=a.slice(-1)[0];$(this).attr({id:c+"_"+b+"_"+a,name:c+"_"+b})})}
function bind_prefs_events(){$(".templateTable .accessTable").find("input:text").unbind("blur.manager_updated").bind("blur.manager_updated",template_edit_ajax);$(".templateTable .accessTable").find("input:radio").unbind("click.manager_updated").bind("click.manager_updated",template_edit_ajax);$(".templateTable .accessTable").find("select").unbind("change.manager_updated").bind("change.manager_updated",template_edit_ajax)}
(function(a){var b,g;a(document).ready(function(){function c(f,b){var d="input:radio[id$=_";b&&(d="input:radio[id$=_"+b+"_");f.find(".ignore_radio").click(function(){"y"===this.value&&f.find(d+"y]").filter(":not(.ignore_radio)").trigger("click");"n"===this.value&&f.find(d+"n]").filter(":not(.ignore_radio)").trigger("click");a(this).attr("checked",!1);return!1})}function i(f,d,b){var e=a('<tr class="accessRowHeader"><td colspan="6">'+g+"</td></tr>");e.find(".no_auth_bounce").val(b.no_auth_bounce);
e.find(".no_auth_bounce").attr({id:"no_auth_bounce_"+f,name:"no_auth_bounce_"+f});e.find(".enable_http_auth").val(b.enable_http_auth);e.find(".enable_http_auth").attr({id:"enable_http_auth_"+f,name:"enable_http_auth_"+f});set_radio_buttons(e,f);a.each(b.access,function(a,d){var b=e.find("#access_"+a+"_"+f+"_y"),c=e.find("#access_"+a+"_"+f+"_n");!0===d.access?(b.attr("checked","checked"),c.attr("checked",!1)):(c.attr("checked","checked"),b.attr("checked",!1))});c(e,f);a(d).addClass("highlightRow");
a(d).after(e);e.find(".accessTable").tablesorter({widgets:["zebra"]});d.data("accessRow",e)}function l(d,c){var h=a('<tr class="accessRowHeader"><td colspan="6">'+b+"</td></tr>");h.find("select").each(function(){var d=a(this);switch(this.name){case "template_type":d.val(c.type);break;case "cache":d.val(c.cache);break;case "allow_php":d.val(c.allow_php);break;case "php_parse_location":d.val(c.php_parsing)}d.attr("name",this.name+"_"+c.id)});h.find(".template_name").val(c.name);"index"===c.name&&h.find(".template_name").attr({readonly:"readonly"});
h.find(".refresh").val(c.refresh);h.find(".hits").val(c.hits);h.data("ajax_ids",{id:c.id,group_id:c.group_id});d.data("prefsRow",h);a(d).addClass("highlightRow");a(d).after(h)}var d,j,k;b=a("#prefRowTemplate").html();g=a("#accessRowTemplate").html();!b||!g?(d=a("#templateAccess, #templatePreferences"),j=a("input:hidden[name=template_id]").val(),k=a("input:hidden[name=group_id]").val(),a("#templatePreferences").data("ajax_ids",{id:j,group_id:k}),c(a("#templateAccess")),d.find("input:text").unbind("blur.manager_updated").bind("blur.manager_updated",
template_edit_ajax),d.find("input:radio").unbind("click.manager_updated").bind("click.manager_updated",template_edit_ajax),d.find("select").unbind("change.manager_updated").bind("change.manager_updated",template_edit_ajax)):(a("#prefRowTemplate, #accessRowTemplate").remove(),EE.manager={refreshPrefs:function(a){refresh_prefs_ajax(a)},showPrefsRow:function(d,b){var c=a(b).parent().parent();hideRow(c,"prefsRow")||(l(c,d),bind_prefs_events());return!1},showAccessRow:function(d,b,c){c=a(c).parent().parent();
hideRow(c,"accessRow")||(i(d,c,b),bind_prefs_events(),c.trigger("applyWidgets"));return!1}})});a(".last_edit").css("opacity",0).show();a("#template_details").hover(function(){a(".last_edit").animate({opacity:1},50)},function(){a(".last_edit").animate({opacity:0},50)});a(document).ready(function(){if(EE.manager&&EE.manager.warnings){a(".warning_details").hide();a(".toggle_warning_details").click(function(){a(".warning_details").hide();a("#wd_"+this.id.substr(3)).show();return!1});var c=a("#template_data"),
b,g;g=function(d,b,c){var f="";c&&1<c.length&&(f='<select name="fr_options" id="fr_options"></select>');a.ee_notice('<div style="padding: 5px;"><label>Find:</label> <input name="fr_find" id="fr_find" type="text" value="" /> <label>Replace:</label> <input type="text" name="fr_replace" id="fr_replace" value=""/> '+f+'</div><div style="padding: 5px;"><button class="submit" id="fr_find_btn">Find Next</button> <button class="submit" id="fr_replace_btn">Replace</button> <button class="submit" id="fr_replace_all_btn">Replace All</button> <label><input name="fr_replace_closing_tags" id="fr_replace_closing_tags" type="checkbox" /> Include Closing Tags</label></div>',
{type:"custom",open:!0,close_on_click:!1});a("#fr_find").val(d);a("#fr_replace").val(b);a("#fr_replace_closing_tags").attr("checked",!1);""!==f&&(a("#fr_options").append(a(c)),a("#fr_options").click(function(){a("#fr_find").val(a(this).val());a("#fr_find_btn").click()}));d&&a("#fr_find_btn").click()};a("#fr_find_btn").live("click",function(){var d=a("#fr_find").val();b=c.selectNext(d).scrollToCursor()});a("#fr_replace_btn").live("click",function(){var d=a("#fr_find").val(),c=a("#fr_replace").val();
b.getSelectedText()===d&&b.replaceWith(c)});a("#fr_replace_all_btn").live("click",function(){var d=a("#fr_find").val(),b=a("#fr_replace").val();""!==jQuery.trim(d)&&(c.val(c.val().split(d).join(b)),a("#fr_replace_closing_tags").attr("checked")&&("{"===d[0]&&"{/"!==d.substr(0,2)&&(d="{/"+d.substr(1)),"{"===b[0]&&"{/"!==b.substr(0,2)&&(b="{/"+b.substr(1)),""!==jQuery.trim(d)&&c.val(c.val().split(d).join(b))))});a(".find_and_replace").click(function(){var a=this.id.substr(8),b="{exp:"+a,c="{exp:"+EE.manager.warnings[a].suggestion,
f=EE.manager.warnings[a].full_tags,i=Array(new Option(b,b)),h;if(f&&1<f.length)for(h=0;h<f.length;h++)a="{"+f[h]+"}",i.push(new Option(a,a));"{exp:"===c&&(c="");g(b,c,i);return!1})}});a("#template_keywords_reset").click(function(){a("#template_keywords").val("");a(".search form").submit()})})(jQuery);
>>>>>>> 0fa8825dc34df02ef80cbe3b3e72c69db1cc2cc1
